<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch Product</title>
  <style>
    body {
      font-family: Arial;
      background: #f2f3f5;
      padding: 20px;
    }
    .card {
      background: #fff;
      padding: 12px;
      margin-bottom: 16px;
      border-radius: 6px;
      max-width: 600px;
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }
    pre {
      white-space: pre-wrap;
      margin: 0;
    }
  </style>
</head>
<body>

<h2>Danh s√°ch Product</h2>
<div id="products">ƒêang t·∫£i d·ªØ li·ªáu...</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ‚úÖ CONFIG ƒê√É S·ª¨A L·ªñI "const"
  const firebaseConfig = {
    apiKey: "AIzaSyA1P4h3VtporU2s_Vrj0WsPqughKf4AIJw",
    authDomain: "didong2-9ce2a.firebaseapp.com",
    projectId: "didong2-9ce2a",
    storageBucket: "didong2-9ce2a.firebasestorage.app",
    messagingSenderId: "791074240366",
    appId: "1:791074240366:web:d877fb3af937c299f4337f",
    measurementId: "G-DJN4BK7W50"
  };

  // Kh·ªüi t·∫°o Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loadProducts() {
    const productsDiv = document.getElementById("products");
    
    try {
      console.log("ƒêang k·∫øt n·ªëi Firestore...");
      const snapshot = await getDocs(collection(db, "products"));
      console.log("ƒê√£ l·∫•y ƒë∆∞·ª£c d·ªØ li·ªáu:", snapshot.size, "s·∫£n ph·∫©m");
      
      productsDiv.innerHTML = "";

      if (snapshot.empty) {
        productsDiv.innerHTML = "üì≠ Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong collection 'products'";
        return;
      }

      snapshot.forEach(doc => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <b>üìã ID:</b> ${doc.id}<br>
          <hr>
          <pre>${JSON.stringify(doc.data(), null, 2)}</pre>
        `;

        productsDiv.appendChild(card);
      });
      
    } catch (e) {
      console.error("Chi ti·∫øt l·ªói:", e);
      productsDiv.innerHTML = `
        <div style="color: red; background: #ffe6e6; padding: 15px; border-radius: 5px;">
          <b>‚ö†Ô∏è L·ªói k·∫øt n·ªëi Firestore:</b><br>
          ${e.message}<br><br>
          <b>Ki·ªÉm tra:</b>
          <ol>
            <li>Firestore Database ƒë√£ ƒë∆∞·ª£c t·∫°o trong project?</li>
            <li>Collection "products" c√≥ t·ªìn t·∫°i?</li>
            <li>Firestore Rules cho ph√©p ƒë·ªçc d·ªØ li·ªáu?</li>
          </ol>
        </div>
      `;
    }
  }

  // T·∫£i s·∫£n ph·∫©m khi trang load
  loadProducts();
</script>

</body>
</html>